<!-- templates/users/profile_update.html -->
{% extends 'base.html' %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <!-- Header -->
    <div class="text-center mb-8">
        <h1 class="text-2xl font-bold text-gray-900 mb-2">Profile Settings</h1>
        <p class="text-gray-600 text-sm">Update your personal and financial information</p>
    </div>

    <!-- Profile Update Form -->
    <div class="glass-card p-6 mb-6">
        <form id="profileForm" method="post">
            {% csrf_token %}
            
            <!-- Personal Information Section -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">Personal Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Age -->
                    <div class="form-group">
                        <label class="form-label">Age</label>
                        <div class="relative">
                            {{ form.age }}
                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                <span class="text-gray-400 text-sm">yrs</span>
                            </div>
                        </div>
                    </div>

                    <!-- Gender -->
                    <div class="form-group">
                        <label class="form-label">Gender</label>
                        {{ form.gender }}
                    </div>

                    <!-- Location -->
                    <div class="form-group md:col-span-2">
                        <label class="form-label">Location</label>
                        <div class="relative">
                            {{ form.location }}
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class='bx bx-map text-gray-400'></i>
                            </div>
                        </div>
                    </div>

                    <!-- Employment Status -->
                    <div class="form-group md:col-span-2">
                        <label class="form-label">Employment Status</label>
                        <div class="relative">
                            {{ form.employment_status }}
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class='bx bx-briefcase text-gray-400'></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Financial Information Section -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">Financial Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Monthly Income -->
                    <div class="form-group">
                        <label class="form-label">Monthly Income</label>
                        <div class="relative">
                            {{ form.monthly_income }}
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <span class="text-gray-500 font-medium">MWK</span>
                            </div>
                        </div>
                    </div>

                    <!-- Monthly Expenses -->
                    <div class="form-group">
                        <label class="form-label">Monthly Expenses</label>
                        <div class="relative">
                            {{ form.monthly_expenses }}
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <span class="text-gray-500 font-medium">MWK</span>
                            </div>
                        </div>
                    </div>

                    <!-- Existing Debt -->
                    <div class="form-group">
                        <label class="form-label">Existing Debt</label>
                        <div class="relative">
                            {{ form.existing_debt }}
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <span class="text-gray-500 font-medium">MWK</span>
                            </div>
                        </div>
                    </div>

                    <!-- Dependents -->
                    <div class="form-group">
                        <label class="form-label">Dependents</label>
                        <div class="relative">
                            {{ form.number_of_dependents }}
                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                <i class='bx bx-user text-gray-400'></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200">
                <button type="submit" class="btn-primary flex-1">
                    <i class='bx bx-save mr-2'></i>
                    Save Changes
                </button>
                <a href="{% url 'user_dashboard' %}" class="btn-secondary flex-1 text-center">
                    <i class='bx bx-x mr-2'></i>
                    Cancel
                </a>
            </div>
        </form>
    </div>

    <!-- Security Section -->
    <div class="glass-card p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Security & Privacy</h3>
        <div class="space-y-4">
            <!-- Password Change -->
            <div class="security-card">
                <div class="flex items-center justify-between p-4">
                    <div class="flex items-center space-x-4">
                        <div class="security-icon bg-blue-100">
                            <i class='bx bx-lock-alt text-blue-600'></i>
                        </div>
                        <div>
                            <h4 class="font-medium text-gray-900">Password</h4>
                            <p class="text-sm text-gray-600">Last changed 3 months ago</p>
                        </div>
                    </div>
                    <button class="security-btn bg-blue-500 hover:bg-blue-600">
                        Change
                    </button>
                </div>
            </div>

            <!-- Two-Factor Authentication -->
            <div class="security-card">
                <div class="flex items-center justify-between p-4">
                    <div class="flex items-center space-x-4">
                        <div class="security-icon bg-purple-100">
                            <i class='bx bx-shield-quarter text-purple-600'></i>
                        </div>
                        <div>
                            <h4 class="font-medium text-gray-900">Two-Factor Auth</h4>
                            <p class="text-sm text-gray-600">Add an extra layer of security</p>
                        </div>
                    </div>
                    <button class="security-btn bg-purple-500 hover:bg-purple-600">
                        Enable
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
    /* Modern Form Styling */
.form-group {
    margin-bottom: 1rem;
}

.form-label {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 0.5rem;
}

/* Input Fields */
input, select {
    width: 100%;
    padding: 0.75rem 1rem;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    background: #ffffff;
    font-size: 0.875rem;
    font-weight: 500;
    color: #1f2937;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

/* Input with icons */
input[type="number"] {
    padding-right: 3rem;
}

/* Select dropdown */
select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 1rem center;
    background-size: 1rem;
    padding-right: 2.5rem;
}

/* Focus States */
input:focus, select:focus {
    outline: none;
    border-color: #10b981;
    background-color: #f9fafb;
    box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1);
    transform: translateY(-1px);
}

/* Hover States */
input:hover, select:hover {
    border-color: #d1d5db;
    background-color: #f9fafb;
}

/* Valid States */
input:valid:not(:placeholder-shown), select:valid {
    border-color: #10b981;
    background-color: #f0fdf4;
}

/* Buttons */
.btn-primary {
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border: none;
    border-radius: 12px;
    padding: 0.875rem 1.5rem;
    font-size: 0.875rem;
    font-weight: 600;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    cursor: pointer;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
}

.btn-secondary {
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    color: #374151;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    padding: 0.875rem 1.5rem;
    font-size: 0.875rem;
    font-weight: 600;
    transition: all 0.3s ease;
    text-decoration: none;
}

.btn-secondary:hover {
    background: #f9fafb;
    border-color: #d1d5db;
    transform: translateY(-1px);
}

/* Security Section */
.security-card {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    transition: all 0.3s ease;
}

.security-card:hover {
    background: #ffffff;
    border-color: #10b981;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

.security-icon {
    width: 3rem;
    height: 3rem;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.security-icon i {
    font-size: 1.25rem;
}

.security-btn {
    color: white;
    border: none;
    border-radius: 8px;
    padding: 0.5rem 1rem;
    font-size: 0.75rem;
    font-weight: 600;
    transition: all 0.3s ease;
    cursor: pointer;
}

.security-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Responsive Design */
@media (max-width: 768px) {
    .grid-cols-1.md\:grid-cols-2 {
        grid-template-columns: 1fr;
    }
    
    .flex-col.sm\:flex-row {
        flex-direction: column;
    }
    
    .security-card .flex.items-center.justify-between {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .security-card .flex.items-center.justify-between > div {
        width: 100%;
    }
    
    .security-btn {
        width: 100%;
        text-align: center;
    }
}
</style>
{% endblock content %}